<div id='product-show'>
  <div class='product-show-page-background'>
    <div class='product-show-page-content container'>

      <h1 class='product-name text-center'>
        <%= @product.name %>
      </h1>

      <div data-product-id='<%= @product.id %>' class='row'>

        <div class='col-md-6'>
          <div class='product-show-image-side'>
            <div class='thumbnail'>
              <%= image_tag(@product.image_url, class: 'product-show-page-image img-zoom', data_zoom_image: @product.image_url) %>
            </div>
          </div>
        </div>

        <div class='col-md-6'>
          <div class='product-show-info-side'>

            <p class='product-description'>
              <%= @product.description %>
            </p>

            <p>
              Color: <%= @product.colour %>
            </p>

            <p>
              Price: $<%= "%.2f" % Rational(@product.price_in_pennies.to_i,100) %>
            </p>

            <p>
              <% $redis.incr("#{@product.name}Views") %>
              Product views: <%= $redis.get("#{@product.name}Views") %>
            </p>

            <% if user_signed_in? %>
            <%= form_with(url: '/payments/create') do |form| %>
            <%= hidden_field_tag(:product_id, @product.id) %>
            <%= render partial: "shared/stripe_checkout_button" %>
            <% end %>
            <% else %>
            <p><%= link_to('Sign in', new_user_session_path) %> or <%= link_to('sign up', new_user_registration_path) %> to purchase.</p>
            <% end %>

            <% if @product.average_rating != 0 %>
            <p>Average Rating: <div id='average-rating' class="rated" data-score="<%= @product.average_rating %>"></div> </p>
            <% else %>
            <p>No ratings yet.</p>
            <% end %>

          </div>
        </div>
      </div>
      <div class='comment-section'>

        <%= render 'new_comment' %>
        <!-- <div class="alert alert-info" style="display:none" role="alert">A new comment was posted!</div> -->
        <%= render 'comments' %>

        <div class='text-center'>
          <%= will_paginate @comments %>
        </div>

      </div>
    </div>
  </div>
</div>
